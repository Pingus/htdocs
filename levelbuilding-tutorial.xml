<?xml version="1.0"?>
<page title="Building a Pingus level">
  <p>
    <img src="images/editor.jpg" align="right" alt="" />
  </p>
  
  <section title="Introduction">
    <p>
      Building a level for Pingus is actually very easy with the 
      level editor, but there are still some things that doesn't 
      as they should. This little guide should make sure 
      everything works smooth for you.
    </p>
  </section>
  
  <section title="Starting from scratch">
    <a href="images/editor_tutorial_editor.jpg"><
        src="images/editor_tutorial_editor_small.jpg" alt="Editor" align="right" /></a>
    <p>
      First of launch Pingus and select the large <em>Editor</em>
      button. You are now inside the level editor. 
    </p>
    <p>
      Lets start with something simple, insert your 
      object. Press the <tt class="key">Insert</tt> button on your keyboard or on 
      button panel at the left side of the screen. You will now see 
      list of object types you can insert. The letters in front of 
      type names describe the keys you have to press to insert 
      object type. Sorry there is at the moment no mouse support 
      the selection menus.
    </p>
    <p>
      Ok, lets insert a ground piece of type ground, to do that 
      <tt class="key">g</tt>. I'll explain the different ground piece types 
      in this article. After a short loading sequence, you will see 
      list of all the gfx which are available. 
      scroll down the list simply move the mouse to the bottom of 
      screen. Now click on an object to insert it into the level.
    </p>
    <a href="images/editor_tutorial_objsel.jpg"><
        src="images/editor_tutorial_objsel_small.jpg" alt="Surface Selector" align="right" /></a>
    <p>
      The first ground piece is now in place, you can simply click 
      it and move it around when you hold down the mouse button. 
      duplicate it press <tt class="key">d</tt>. The duplicated 
      will be inserted at the same position as the original object,
      only with a short offset to the bottom/right.<br /> If you want 
      move around the duplicated object, its a good idea to move it 
      bit away from the old object first, so that you don't 
      select the wrong object. This becomes especially important 
      have grouped some objects. To do that use the cursor keys, 
      down the shift key to get a faster movement.
    </p>
  </section>

  <section title="Entrances">
    <p>
      Now that we have some ground to walk on, we need an entrance 
      let the Pingus enter the level. Hit <tt class="key">insert</tt>
      and <tt class="key">e</tt> for an entrance. You will 
      see a list of entrance types, select the "generic"
      one. After that is done you will see a black arrow with a 
      "G" to its site, that is the entrance or more exactly 
      position where the Pingus can enter the level. 
      "generic" entrance doesn't use any gfx.
    </p>
  </section>

  <section title="Exits">
    <p>
      The Pingus can now enter the level, lets place a exit so 
      they can leave it again. Again press <tt class="key">Insert</tt> and 
      select Exit with <tt class="key">x</tt>. You get the same list of 
      you got when you inserted the ground piece. Select a surface,
      which looks like an exit and place it where the Pingus can 
      it. Now your done the level should be ready for a test.
    </p>
  </section>

  <section title="Starting the level the first time">
    <
      href="images/editor_tutorial_level.jpg"><img src="images/editor_tutorial_level_small.jpg"
        alt="Level" align="right" /></a>
    <p>
      Now that the level is basically done, lets start it by 
      <tt class="key">F4</tt> or the "Run" key on 
      button panel. The level will than start and you can test it. 
      your are done press <tt class="key">Esc</tt> or wait until 
      level is complete. After testing your level you will come 
      into the level editor.
    </p>
  </section>
  
  <section title="Saving and loading">
    <p>
      Its a good idea to save the level from time to time, to do 
      press <tt class="key">F6</tt> and enter a file name for it, 
      example <tt class="file">my_test</tt>. Node that the 
      <em>must not</em> have an ending like <tt class="file">.plf</tt>
      or <tt class="file">.psm</tt>. The level will than be saved 
      <tt class="file">~/.pingus/levels/my_test.plf</tt> and <
        class="file">~/.pingus/levels/my_test.psm</tt><br />

      To load a level press <tt class="key">F5</tt> and input the filename. 
      dialog also has a primitive tab-completion. To use it 
      the console by pressing <tt class="key">^</tt> and then 
      <tt class="key">Tab</tt>. The completion will go into the console. The tab-completion is currently not fully functional, therefor it 
      only work in the default directory and in <em>no</em> 
      directory.
    </p>
  </section>

  <section title="Beautifying the level">

    <p>
      You might have noticed that there is still a lot of 
      missing in your level. You have an ugly default background 
      your Pingus appeared out of nothing. So lets start to make it 
      little nicer. 
    </p>
  </section>
  
  <h3>Changing the background</h3>
  <p>
    To change the background press <tt class="key">F10</tt> 
    select one of the available backgrounds.
  </p>
  
  <h3>Building an entrance</h3>
  <a href="images/editor_tutorial_entrance.jpg"><
      src="images/editor_tutorial_entrance_small.jpg" alt="Entrance" align="right" /></a>
  <p>
    The default entrance just adds a position where the Pingus 
    the level, but no gfx, so that is the next thing to add. To 
    that you have to use hotspots. Hotspots are graphical objects,
    which don't influence the collision map. To add a hotspot, 
    <tt class="key">Insert</tt> and then <tt class="key">h</tt> and select a thing 
    looks like an entrance. You need two surfaces for an entrance,
    one which is behind the Pingus and one that is above 
    Pingus to get a pseudo 3D effect.
  </p>

  <p>
    Select the first hotspot and than lower it below the 
    level which is at z_pos 75. Press <tt class="key">Shift-PgDown</tt> to 
    the z_pos value to -100, note that you can see the z-pos in 
    status line. <tt class="key">PgDown</tt> itself will not change 
    z-pos, but instead only change the ordering of all objects,
    which have the same z-pos. After your done with the 
    hotspots add the top hotspot, to raise it 
    <tt class="key">Shift-PgUp</tt> and bring it to a z-pos value 
    100. Finally adjust the position so that it looks correct.
  </p>

  <h3>Adding some grass</h3>
  <a href="images/editor_tutorial_level2.jpg"><
      src="images/editor_tutorial_level2_small.jpg" alt="Level (beautified)" align="right" /></a>
  <p>
    Stones alone looks much to simple to be attractive, so lets 
    some grass.<br />Grass is special since it shouldn't influence 
    way the Pingus are walking over the ground, but it should 
    erasable by explosions and diggers or miners, for this 
    there is the special ground 
    "transparent". Press <tt class="key">Insert</tt> and <tt class="key">n</tt> 
    select a piece of grass and place it over the stones. Try to add 
    more ground pieces, and viola, the level looks much better now.
  </p>

  <h3>Adding lava</h3>
  <p>
    Now you might want to add some lava or water under the stones, but 
    is currently not implemented in the editor, so you have 
    editor the level files directly. Open your level file, 
    should be saved under <tt class="file">~/.pingus/levels/my_test.plf</tt> 
    insert the following text at the end of the file:
  </p>

  <pre>liquid {
    image = (resource)"Liquid/lava";
    x_pos = -40;
    y_pos = 412;
    z_pos = -100;
    width = 1400;
    }

    liquid {
    image = (resource)"Liquid/lava";
    x_pos = -40;
    y_pos = 412;
    z_pos = 100;
    width = 1400;
    }</pre>

  <p>
    If you are done, save the file and reload it into the 
    editor. You will see then some lava floating around. Adjust 
    position of the lava and you are done. Its a good idea to 
    some lava in the background and another lava object on top 
    the level where the position is shifted a bit to the left, 
    will result in a pseudo 3D effect. If the lava is not 
    enough, change the parameter in the level file reload the 
    again.
  </p>

  <h3>Well done</h3>
  <p>
    Now you know the basics of level editing, all that is missing 
    is a good idea for a level. If you have created some levels,
    please mail them to <a href="mailto:grumbel@gmail.com">Ingo Ruhnke</a>
    so that they can go into the next Pingus release.
  </p>
  <p>
    The next part of this tutorial will explain how the level 
    structured, how the objects are ordered and what object 
    exist.
  </p>

  <section title="Level Structure">

    <p>Before I start to explain all the different object types its 
      good idea to understand the map structure of Pingus first.
    </p>
    
    <p>A Pingus level consists of multiple layers of gfx maps and 
      additional layer for the collision detection.<br /> The gfx 
      consist of one layer for the background and on for the gfx-map,
      that's the ground where you can dig and blast holes in it. 
      rest of the gfx layers are hotspots objects, entrances, exits,
      etc. and the Pingus themselves.</p>
  </section>

  <section title="Z-Pos">

    <p>To influence the ordering of objects you have 
      possibilities, first you can simply lower and raise it with <
        class="key">PgUp</tt> and <tt class="key">PgDown</tt>, but 
      will only work inside a layer. For example if you want to 
      one ground piece above another that's the right way, but if 
      want to lower a hotspot below the ground layer, than that's 
      wrong way. To accomplish that you have to press <
        class="key">Shift PgUp</tt> or <tt class="key">Shift PgDown</tt>
      (or <tt class="key">Ctrl</tt>) to change the z-pos of 
      object. If an object its below zero, than it will be draw 
      the ground layer, if its above 75 it will get drawn above 
      ground map and the Pingus, if an object is between 0 and 75 
      will be drawn above the ground layer, but behind the 
      layer. So the z-pos describes the ordering of the layers.</p>
  </section>
  
  <section title="Object types">
    <h3>Groundpieces (ground, transparent, solid)</h3>

    <p>Groundpieces are the ground where the Pingus can walk. They 
      they are at runtime combined to a single gfx map and 
      blitted at once. They can have different types, which 
      change the way how they are handled on the collision map.</p>

    <h4>ground</h4>
    <p>
      Normal ground is of type ground, the Pingus can dig through it 
      walk on it and blast it away.
    </p>

    <h4>solid</h4>
    <p>
      Solid ground is like the normal ground, but the Pingus can't 
      through it. This is meant for metal plates and other stuff which 
      obviously not passable.
    </p>

    <h4>transparent</h4>
    <p>
      Transparent ground pieces are objects, which have no influence 
      the collision map, therefore the Pingus can't walk on it. 
      transparent ground pieces are blitted to the gfx map, so 
      Pingus will remove it if they explode or dig on it. This 
      type is especially meant for grass or other little 
      which make a level nice, but which shouldn't have influence of it.
    </p>

    <h4>bridge</h4>
    <p>
      The bridges which a bridger builds are of type ground, 
      special property of the bridge property is that the Pingus can walk through it from 
    </p>
  </section>

  <h3>Hotspots</h3>
  <p>Hotspots are gfx objects which don't get blitted to the 
    map, instead they are draw separately. This has the consequences,
    that they can't be digged away and that they can scroll at 
    different speed than the rest of the ground (
    scrolling). Hotspots also have the advantage that they have 
    z-pos, therefore they can be placed above or below 
    Pingus.<br /> Entrances for example consist normally of 
    objects an hotspots for the back side of the entrance, an 
    for the front side of the entrance and an entrance object 
    the middle position.</p>

  <h3>Entrances</h3>
  <p>Entrances are the places where the Pingus enter a level, 
    normally don't draw any gfx, therefore it is required that 
    add some Hotspots above and below them to make them 
    realistic.</p>

  <h3>Exits</h3>
  <p>Exits are similar to hotspots, but they provide first an 
    point, where the  Pingus can leave a level and second they 
    an area in the collision map, so that the exit isn't blocked 
    any objects in front of them.</p>

  <h3>Liquids</h3> 
  
  <p>Liquids are things like lava, water or acid. The consist of 
    single image which is blitted multiple times up to a 
    width. In addition to hotspots they also manipulate the 
    map so that the area is marked as <em>deadly</em>.</p>

</page>
